From cbfadc6059e77ccef53e13589f32d4764bb6ab5e Mon Sep 17 00:00:00 2001
From: Quey-Liang Kao <s101062801@m101.nthu.edu.tw>
Date: Fri, 30 Aug 2024 20:12:18 +0800
Subject: [PATCH] [...] temp for verification

---
 examples/coord_clients/reinforcement_simulator.py | 3 ++-
 examples/coord_clients/verifier.py                | 7 ++++++
 2 files changed, 8 insertions(+), 1 deletion(-)
 create mode 100644 examples/coord_clients/verifier.py

diff --git a/examples/coord_clients/reinforcement_simulator.py b/examples/coord_clients/reinforcement_simulator.py
index 9e801df..f3278fc 100644
--- a/examples/coord_clients/reinforcement_simulator.py
+++ b/examples/coord_clients/reinforcement_simulator.py
@@ -260,7 +260,7 @@ class RLSimAgent(Agent):
                 self.root = None
                 self.current_node = None
 
-            if self.dataset_counter > 0 and data[0:4] in (b'Ix04', b'Ix05'):
+            if self.dataset_counter > 0 and data[0:4] in (b'Ix02', b'Ix04', b'Ix05'):
                 i = 0
                 WIN = np.ndarray([1], dtype=np.float32)
                 WIN[0] = 1.0
@@ -273,6 +273,7 @@ class RLSimAgent(Agent):
                 self.dataset.seek(self.dataset_counter * DATASET_UNIT - 1, 0)
                 self.dataset.write(b'\n')
                 self.dataset.close()
+                sys.exit(255)
             return
         elif data[0:4] in (b'Ix01', b'Ix03', b'Ix07', b'Ix08'):
             if data[0:4] in (b'Ix07'):
diff --git a/examples/coord_clients/verifier.py b/examples/coord_clients/verifier.py
new file mode 100644
index 0000000..08bb4bc
--- /dev/null
+++ b/examples/coord_clients/verifier.py
@@ -0,0 +1,7 @@
+import numpy as np
+import torch
+import reinforcement_network
+import constant
+import os
+
+print(torch.from_numpy(np.frombuffer(open(os.sys.argv[1], 'rb').read(4096)[constant.D_STATE:constant.D_STATE+constant.D_POLICY], dtype=np.float32).copy()).to(torch.device("cpu")).unsqueeze(0))
-- 
2.45.1

